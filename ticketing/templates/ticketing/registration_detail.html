{% extends 'ticketing/base.html' %}

{% block content %}
<h2 style="text-align: center;">Student Details</h2>

<table class="details-table">
  <tbody>
    <tr>
      <th>Name:</th>
      <td>{{ registration.name }}</td>
    </tr>
    <tr>
      <th>SRN:</th>
      <td>{{ registration.srn }}</td>
    </tr>
    <tr>
      <th>PRN:</th>
      <td>{{ registration.prn }}</td>
    </tr>
    <tr>
      <th>Email:</th>
      <td>{{ registration.email }}</td>
    </tr>
    <tr>
      <th>Phone:</th>
      <td>{{ registration.phone }}</td>
    </tr>
    <tr>
      <th>Year:</th>
      <td>{{ registration.year }}</td>
    </tr>
  </tbody>
</table>

<div class="confirmation-form-container">
  <h3 style="text-align: center;">Ticket Confirmation</h3>
  <form method="post" class="confirmation-form">
    {% csrf_token %}
    {{ form.as_p }}

    <script>
      function toggleUtrField() {
        const paymentType = document.getElementById("id_payment_type").value;
        const utrField = document.getElementById("div_id_utr_number");
        if (paymentType === "UPI") {
          utrField.style.display = "block";
        } else {
          utrField.style.display = "none";
          document.getElementById("id_utr_number").value = "";
        }
      }
      document.addEventListener("DOMContentLoaded", function() {
        toggleUtrField();
        document.getElementById("id_payment_type").addEventListener("change", toggleUtrField);
      });
    </script>

    <button type="submit">Confirm</button>
  </form>
</div>
{% endblock %}
